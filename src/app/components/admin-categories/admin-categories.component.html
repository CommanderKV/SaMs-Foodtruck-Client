<app-admin-nav></app-admin-nav>

<div class="container-25-75">
    <div class="category-content">
        <h1 class="title">Categories</h1>
        <div class="options">
            <a class="btn" routerLink="/admin/category">New Category</a>
        </div>
        <div class="search-bar">
            <input type="text" placeholder="I want a..." [(ngModel)]="searchItem" (ngModelChange)="search()"/>
            <span class="search-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"/></svg>
            </span>
        </div>

        <div class="category-list">
            <ng-container *ngFor="let category of categories">
                <div class="category-item" *ngIf="category.display">
                    <div>
                        <h2>{{category.name}}</h2>
                        <div>
                            <a class="btn" *ngIf="category.id !== undefined" (click)="editItem(category.id)">Edit</a>
                            <svg class="dropdown" (click)="category.displayOptions = !category.displayOptions" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path fill="#c900ff" d="M137.4 374.6c12.5 12.5 32.8 12.5 45.3 0l128-128c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8L32 192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l128 128z"/></svg>
                        </div>
                    </div>
                    <ul *ngIf="category.displayOptions">
                        <li *ngIf="category.items.length === 0"><h3>No products in this category</h3></li>
                        <ng-container *ngIf="category.items.length > 0">
                            <li class="category-item-product" *ngFor="let item of category.items">
                                <div>
                                    <img [src]="item.photo" alt="Image of a {{item.name}}"/>
                                    <h3>{{item.name}}</h3>
                                </div>
                                <a class="btn" (click)="editProduct(item.id)">Edit</a>
                            </li>
                        </ng-container>
                    </ul>
                </div>
            </ng-container>
        </div>
    </div>
</div>
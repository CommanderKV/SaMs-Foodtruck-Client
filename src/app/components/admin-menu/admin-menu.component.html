<app-admin-nav></app-admin-nav>

<div class="container-25-75">
    <div class="menu-content">
        <h1 class="title">Menu</h1>
        <div class="options">
            <a class="btn" routerLink="/admin/product">Add a Product</a>
            <a class="btn" routerLink="/admin/categories">View Categories</a>
        </div>
        <div class="search-bar">
            <input type="text" placeholder="I want a..." [(ngModel)]="searchItem" (ngModelChange)="search()"/>
            <span class="search-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"/></svg>
            </span>
        </div>

        <div class="menu-list">
            <h1 *ngIf="products.length === 0">No menu items found</h1>
            <ng-container *ngFor="let item of products; let pos = index">
                <div class="menu-item" *ngIf="item.display">
                    <div class="item-info">
                        <img [src]="'imgs/' + item.photo" alt="{{item.name}} image" class="item-img"/>
                        <h2>{{item.name}}</h2>
                        <p class="item-description">{{item.description}}</p>
                        <a class="btn" (click)="editItem(item.id)">Edit</a>
                    </div>
                    <div class="item-details">
                        <h3>Details</h3>
                        <div>
                            <section>
                                <h4>Price: <span>${{item.price}}</span></h4>
                                <h4>Can be a meal? <span>{{item.canBeMeal ? 'Yes' : 'No'}}</span></h4>
                                <div class="ingredients">
                                    <h4>Required ingredients:</h4>
                                    <ul>
                                        <li *ngFor="let ingredient of item.ingredients">
                                            <p>{{ingredient.quantity}} {{ingredient.measurement}} of {{ingredient.name}}</p>
                                        </li>
                                    </ul>
                                </div>
                            </section>
                            <section>
                                <div class="categories">
                                    <h4>Categories:</h4>
                                    <ul>
                                        <li *ngFor="let category of item.categories">
                                            {{category.name}}
                                        </li>
                                    </ul>
                                </div>
                                <div>
                                    <h4>Available toppings:</h4>
                                    <ul>
                                        <li *ngFor="let group of item.optionGroups">
                                            <p>{{group.sectionName}}</p>
                                            <ul>
                                                <li *ngFor="let option of group.options">
                                                    <p>{{option.ingredient.name}} <span>{{option.price}}</span></p>
                                                </li>
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </section>
                        </div>
                    </div>
                </div>
            </ng-container>
        </div>
    </div>
</div>
